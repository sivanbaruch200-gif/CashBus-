# CashBus User Flow - Phase 2 Reporting System

Visual guide to the two-step incident reporting process.

---

## Complete User Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      USER AT BUS STOP                            â”‚
â”‚               (Bus didn't arrive / didn't stop)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP 0: Dashboard                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚              ğŸ”´ Red Panic Button                       â”‚     â”‚
â”‚  â”‚       "×”××•×˜×•×‘×•×¡ ×œ× ×”×’×™×¢ / ×œ× ×¢×¦×¨"                      â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚     [Click to report incident]                         â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ User taps button
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STEP 1: GPS Verification (Auto)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         ğŸ“ Locating icon (animated pulse)              â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚        "×××ª×¨ ××ª ×”××™×§×•× ×©×œ×š..."                          â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚    Browser prompts: "Allow location access?"           â”‚     â”‚
â”‚  â”‚           [Block]  [Allow]                             â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                   â”‚
â”‚  What happens:                                                   â”‚
â”‚  âœ“ navigator.geolocation.getCurrentPosition()                   â”‚
â”‚  âœ“ Captures lat/lng with high accuracy                          â”‚
â”‚  âœ“ Stores timestamp (legal evidence)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ GPS acquired (1-2 seconds)
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             GPS Success Screen (1.5 seconds)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         âœ… Green checkmark                             â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚        "×”××™×§×•× ×ª×•×¢×“ ×‘×”×¦×œ×—×”!"                           â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚   "××™×§×•× GPS ×©×œ×š ××ª×•×¢×“ ×›×¨××™×” ××©×¤×˜×™×ª"                  â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ Auto-advances
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STEP 2: Incident Details Form                       â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ×¤×¨×˜×™ ×”××™×¨×•×¢                      ğŸ“ ××™×§×•× ×ª×•×¢×“       â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚  ××¡×¤×¨ ×§×• *                                             â”‚     â”‚
â”‚  â”‚  [ğŸšŒ _______________]  (e.g., 12, 480, 405)           â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚  ×—×‘×¨×ª ×”××•×˜×•×‘×•×¡×™× *                                    â”‚     â”‚
â”‚  â”‚  [â–¼ ××’×“]                                               â”‚     â”‚
â”‚  â”‚     â”œâ”€ ××’×“                                             â”‚     â”‚
â”‚  â”‚     â”œâ”€ ×“×Ÿ                                              â”‚     â”‚
â”‚  â”‚     â”œâ”€ ×§×•×•×™×                                           â”‚     â”‚
â”‚  â”‚     â””â”€ ××˜×¨×•×¤×•×œ×™×Ÿ...                                    â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚  ×¡×•×’ ×”×ª×§×œ×” *                                          â”‚     â”‚
â”‚  â”‚  [×œ× ×”×’×™×¢] [×œ× ×¢×¦×¨] [×¢×™×›×•×‘]                          â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚  â”€â”€ If "×¢×™×›×•×‘" selected â”€â”€                            â”‚     â”‚
â”‚  â”‚  ×–××Ÿ ×¢×™×›×•×‘ (×‘×“×§×•×ª)                                    â”‚     â”‚
â”‚  â”‚  [___] ×“×§×•×ª                                            â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚  × ×–×§ × ×•×¡×£ ×©× ×’×¨× (××•×¤×¦×™×•× ×œ×™)                           â”‚     â”‚
â”‚  â”‚  [â–¼ ×œ×œ× × ×–×§ × ×•×¡×£]                                     â”‚     â”‚
â”‚  â”‚     â”œâ”€ ×”×•×¦××•×ª ××•× ×™×ª                                   â”‚     â”‚
â”‚  â”‚     â”œâ”€ ××•×‘×“×Ÿ ×™×•× ×¢×‘×•×“×”                                â”‚     â”‚
â”‚  â”‚     â”œâ”€ ×”×—××¦×ª ×‘×—×™× ×”                                    â”‚     â”‚
â”‚  â”‚     â”œâ”€ ×”×—××¦×ª ×ª×•×¨ ×œ×¨×•×¤×                                â”‚     â”‚
â”‚  â”‚     â””â”€ ××—×¨                                             â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚  â”€â”€ If damage selected â”€â”€                              â”‚     â”‚
â”‚  â”‚  ×¡×›×•× ×”× ×–×§ (â‚ª)                                         â”‚     â”‚
â”‚  â”‚  [___] â‚ª                                               â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚  ×”×¢×œ××ª ×ª××•× ×” (××•×¤×¦×™×•× ×œ×™)                              â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚     â”‚
â”‚  â”‚  â”‚   ğŸ“· ×¦×œ× ××• ×”×¢×œ×” ×ª××•× ×”      â”‚                     â”‚     â”‚
â”‚  â”‚  â”‚   ×ª××•× ×ª ×”×ª×—× ×”, ×”×œ×•×— ×–×× ×™×   â”‚                     â”‚     â”‚
â”‚  â”‚  â”‚      ××• ×”××•×˜×•×‘×•×¡             â”‚                     â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚     â”‚
â”‚  â”‚     OR (if photo uploaded)                             â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚     â”‚
â”‚  â”‚  â”‚  [Image Preview]              â”‚                     â”‚     â”‚
â”‚  â”‚  â”‚  [×”×¡×¨ ×ª××•× ×”]                 â”‚                     â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                   â”‚
â”‚            â”€â”€ AS USER FILLS FORM â”€â”€                              â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ğŸ’° ×¤×™×¦×•×™ ××©×•×¢×¨          â‚ª80                           â”‚     â”‚
â”‚  â”‚  ×¢×œ ×¤×™ ×ª×§× ×” 428×–                                       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â†‘ Updates in real-time as form changes                  â”‚
â”‚                                                                   â”‚
â”‚  [×‘×™×˜×•×œ]           [×©×œ×— ×“×™×•×•×— â†]                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ User submits
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Processing Screen                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         ğŸ”„ Processing animation                         â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚          "×©×•××¨ ××ª ×”×“×™×•×•×—..."                           â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                   â”‚
â”‚  What happens (backend):                                         â”‚
â”‚  1. Calculate compensation (compensation.ts)                     â”‚
â”‚  2. Upload photo to Storage (if present)                         â”‚
â”‚  3. Create incident in database                                  â”‚
â”‚  4. Update user profile stats                                    â”‚
â”‚  5. Simulate verification (2 second delay)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Success Confirmation                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         âœ… Green light indicator                        â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚        "×”×“×™×•×•×— × ×©××¨ ×‘×”×¦×œ×—×”!"                           â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ Auto-return to dashboard (3 sec)
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Updated Dashboard View                              â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ğŸ’° My Account                                          â”‚     â”‚
â”‚  â”‚  ×¡×›×•× ×©×”×ª×§×‘×œ:      â‚ª0                                  â”‚     â”‚
â”‚  â”‚  ×¤×™×¦×•×™ ×¤×•×˜× ×¦×™××œ×™:  â‚ª80  â† UPDATED!                    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ×¤×¢×™×œ×•×ª ××—×¨×•× ×”                                         â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚     â”‚
â”‚  â”‚  â”‚ ğŸšŒ 480  ××’×“          ×œ×¤× ×™ 1 ×“×§×•×ª  ×××ª×™×Ÿ â† NEW â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Decision Tree: Compensation Calculation

```
User fills form
      â”‚
      â–¼
Incident Type?
      â”‚
      â”œâ”€â†’ "×œ× ×”×’×™×¢" (No arrival)
      â”‚   â””â”€â†’ Base: â‚ª80
      â”‚
      â”œâ”€â†’ "×œ× ×¢×¦×¨" (Didn't stop)
      â”‚   â””â”€â†’ Base: â‚ª70
      â”‚
      â””â”€â†’ "×¢×™×›×•×‘" (Delay)
          â”œâ”€â†’ Delay < 20 min â†’ â‚ª0
          â”œâ”€â†’ Delay 20-40 min â†’ â‚ª35
          â”œâ”€â†’ Delay 40-60 min â†’ â‚ª60
          â””â”€â†’ Delay 60+ min â†’ â‚ª100

      â–¼
Damage Type?
      â”‚
      â”œâ”€â†’ None â†’ Total = Base
      â”‚
      â”œâ”€â†’ "×”×•×¦××•×ª ××•× ×™×ª" (Taxi)
      â”‚   â””â”€â†’ Add: Full amount (with receipt)
      â”‚
      â”œâ”€â†’ "××•×‘×“×Ÿ ×™×•× ×¢×‘×•×“×”" (Lost workday)
      â”‚   â””â”€â†’ Add: Up to â‚ª500
      â”‚
      â”œâ”€â†’ "×”×—××¦×ª ×‘×—×™× ×”" (Missed exam)
      â”‚   â””â”€â†’ Add: Up to â‚ª1,000
      â”‚
      â”œâ”€â†’ "×”×—××¦×ª ×ª×•×¨ ×œ×¨×•×¤×" (Medical)
      â”‚   â””â”€â†’ Add: Up to â‚ª300
      â”‚
      â””â”€â†’ "××—×¨" (Other)
          â””â”€â†’ Add: Up to â‚ª200

      â–¼
Total Compensation Displayed
```

---

## Photo Upload Flow

```
User clicks photo area
      â”‚
      â–¼
On Mobile?
      â”‚
      â”œâ”€â†’ Yes â†’ Open camera
      â”‚         â””â”€â†’ Take photo
      â”‚             â””â”€â†’ Show preview
      â”‚
      â””â”€â†’ No â†’ File picker
                â””â”€â†’ Select image
                    â””â”€â†’ Show preview

      â–¼
User clicks "×©×œ×— ×“×™×•×•×—"
      â”‚
      â–¼
Photo uploaded?
      â”‚
      â”œâ”€â†’ Yes â†’ Upload to Supabase Storage
      â”‚         â”œâ”€â†’ Path: {user_id}/{incident_id}_{timestamp}.jpg
      â”‚         â”œâ”€â†’ Get public URL
      â”‚         â””â”€â†’ Store URL in incidents.photo_urls[]
      â”‚
      â””â”€â†’ No â†’ Skip photo upload
                â””â”€â†’ Continue with incident creation

      â–¼
Incident created successfully
```

---

## Error Handling

```
GPS Permission Denied
      â”‚
      â–¼
Show error: "×œ× × ×™×ª×Ÿ ×œ×§×‘×œ ××™×§×•× GPS"
      â”‚
      â””â”€â†’ Return to dashboard
          â””â”€â†’ Button available to try again

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Photo Upload Fails
      â”‚
      â–¼
Log error to console
      â”‚
      â””â”€â†’ Continue with incident creation
          â””â”€â†’ Incident saved without photo
              â””â”€â†’ User can add photo later (future feature)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Database Error
      â”‚
      â–¼
Show alert: "×©×’×™××” ×‘×©××™×¨×ª ×”×“×™×•×•×—"
      â”‚
      â””â”€â†’ Keep form data
          â””â”€â†’ User can retry submit
```

---

## Mobile vs Desktop Experience

### Mobile (Primary Use Case)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“± Phone      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚GPS: âœ…   â”‚ â”‚  Quick access
â”‚  â”‚Camera: âœ…â”‚ â”‚  High accuracy GPS
â”‚  â”‚RTL: âœ…   â”‚ â”‚  Camera integration
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  One-handed use
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Desktop (Secondary)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’» Desktop             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚GPS: âš ï¸ Less acc. â”‚ â”‚  Still works
â”‚  â”‚Camera: âŒ No cam  â”‚ â”‚  File upload only
â”‚  â”‚RTL: âœ…           â”‚ â”‚  Full features
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  Testing/Admin
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technical Data Flow

```
PanicButton Component
      â”‚
      â”œâ”€â†’ Step 1: Button
      â”‚   â””â”€â†’ onClick â†’ handlePanicPress()
      â”‚       â””â”€â†’ navigator.geolocation.getCurrentPosition()
      â”‚           â””â”€â†’ setGpsLocation({lat, lng})
      â”‚               â””â”€â†’ Auto-advance to Step 2
      â”‚
      â”œâ”€â†’ Step 2: GPS Verify
      â”‚   â””â”€â†’ Show success animation
      â”‚       â””â”€â†’ 1.5 sec delay
      â”‚           â””â”€â†’ Auto-advance to Step 3
      â”‚
      â””â”€â†’ Step 3: Details Form
          â””â”€â†’ User fills fields
              â””â”€â†’ Each change â†’ handleInputChange()
                  â””â”€â†’ calculateCompensation()
                      â””â”€â†’ Update compensation display

User clicks "×©×œ×— ×“×™×•×•×—"
      â”‚
      â–¼
PanicButton.handleSubmit()
      â”‚
      â””â”€â†’ Validate required fields
          â””â”€â†’ Create IncidentFormData object
              â””â”€â†’ Call onIncidentSubmit(data)

Dashboard.handleIncidentSubmit(data)
      â”‚
      â”œâ”€â†’ calculateCompensation(data)
      â”‚   â””â”€â†’ Get total compensation amount
      â”‚
      â”œâ”€â†’ createIncidentWithPhoto(incident, photoFile?)
      â”‚   â”œâ”€â†’ Insert incident into database
      â”‚   â”œâ”€â†’ Get new incident ID
      â”‚   â””â”€â†’ If photo: uploadIncidentPhoto(file, id)
      â”‚       â””â”€â†’ Update incident with photo_url
      â”‚
      â”œâ”€â†’ Update profile stats
      â”‚   â””â”€â†’ total_potential += compensation
      â”‚       total_incidents += 1
      â”‚
      â””â”€â†’ Refresh incidents list
          â””â”€â†’ Show success indicator
              â””â”€â†’ Reset form after 3 sec
```

---

## State Management

```
PanicButton Component State:
â”œâ”€ step: 'button' | 'gps-verify' | 'details'
â”œâ”€ gpsLocation: { lat, lng } | null
â”œâ”€ isLocating: boolean
â”œâ”€ photoPreview: string | null
â”œâ”€ formData: Partial<IncidentFormData>
â””â”€ compensation: number

Dashboard Component State:
â”œâ”€ verificationStatus: 'idle' | 'checking' | 'verified' | 'failed'
â”œâ”€ profile: Profile | null
â”œâ”€ incidents: Incident[]
â””â”€ loading: boolean
```

---

## User Psychology Notes

### Why This Flow Works:

1. **Immediate Action** - Red panic button â†’ instant gratification
2. **Progress Visibility** - 3 clear steps, user always knows where they are
3. **Automatic GPS** - User doesn't think about location, it just works
4. **Instant Feedback** - Compensation shows immediately, motivates completion
5. **Optional Complexity** - Core flow is fast, damage/photo optional for detail-oriented users
6. **Forgiveness** - Can cancel anytime, data not lost until submit

### Psychological Triggers:

- **Urgency:** Red button, "panic" language
- **Trust:** GPS verification, legal basis shown
- **Hope:** Seeing potential â‚ª amount
- **Simplicity:** Only 2 required fields (line, company)
- **Completion:** Progress through clear steps

---

## Performance Metrics

**Target Times:**
- GPS acquisition: < 3 seconds
- Form fill: < 30 seconds total
- Photo upload: < 5 seconds
- Database save: < 2 seconds
- Total flow: < 45 seconds from panic to dashboard

**Success Criteria:**
- GPS success rate: > 95%
- Photo upload success: > 90%
- Form completion rate: > 80%
- User satisfaction: High (getting â‚ª estimate)

---

This flow is designed for **frustrated passengers** who want **quick justice**. Every second counts.
